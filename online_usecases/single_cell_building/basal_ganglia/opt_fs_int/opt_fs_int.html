


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Optimise a striatial fast-spiking interneuron &#8212; HBP Brain Simulation Platform Guidebook 0.1.1 documentation</title>
    <link rel="stylesheet" href="../../../../_static/hbpdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bsp.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bsp.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/extra.js"></script>
    <script type="text/javascript" src="../../../../_static/hbpdoc.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Circuit Building" href="../../../circuit_building/circuit_building.html" />
    <link rel="prev" title="Basal Ganglia" href="../basal_ganglia.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">

  </head><body>
<div class="hbpdoc-page">
    <section class="hbpdoc-title page-header">
        <a class="project-title" href="../../../../index.html">HBP Brain Simulation Platform Guidebook</a>

        <a class="hbpdoc-toc-toggle pull-right" href>
            <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
        </a>
    </section>
    <section class="hbpdoc-main">
        <nav class="hbpdoc-sidebar hbpdoc-container">
            <a class="hbpdoc-toc-toggle pull-right" href>
                <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
            </a>
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../basal_ganglia.html"
                        title="previous chapter">Basal Ganglia</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../../circuit_building/circuit_building.html"
                        title="next chapter">Circuit Building</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/online_usecases/single_cell_building/basal_ganglia/opt_fs_int/opt_fs_int.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </nav>

        <article class="hbpdoc-content">

            <div class="content">
                
                <div class="breadcrumb breadcrumb-meta expand">
                    
                    <a href="../../../online_usecases.html">Online Use Cases</a>
                    
                    <a href="../../single_cell_building.html">Single Cell Building</a>
                    
                    <a href="../basal_ganglia.html">Basal Ganglia</a>
                    
                </div>
                

                <aside class="hbpdoc-hnav hbpdoc-hnav-top">
                    
                    <span class="hbpdoc-hnav-previous">
                        previous: <a class="hbpdoc-hnav-link" href="../basal_ganglia.html">Basal Ganglia</a>
                    </span>
                    
                    
                    <span class="hbpdoc-hnav-next">
                        next: <a class="hbpdoc-hnav-link" href="../../../circuit_building/circuit_building.html">Circuit Building</a>
                    </span>
                    
                </aside>

                <div class="section" id="optimise-a-striatial-fast-spiking-interneuron">
<span id="fs-single-cell-opt-guidebook"></span><h1>Optimise a striatial fast-spiking interneuron<a class="headerlink" href="#optimise-a-striatial-fast-spiking-interneuron" title="Permalink to this headline">Â¶</a></h1>
<p>This Use Case demonstrates how BluePyOpt can be used to optimize a striatal
fast-spiking interneuron. The notebook is self-contained and runs a few steps
of the genetic optimization. For a production run, the population size as well
as the number of iterations need to be increased as commented in the notebook.</p>
<p>The notebook starts by downloading the relevant code from the Collab storage
and setting up the simulation and graphical environment. Since we are using
Neuron, we also need to compile the channel mod files.</p>
<p>The information about the optimization to be run is stored in <cite>config/</cite>
directory:</p>
<ul class="simple">
<li><cite>protocols.json</cite></li>
<li><cite>features.json</cite></li>
<li><cite>mechanisms.json</cite></li>
<li><cite>parameters.json</cite> and <cite>parameters-demo.json</cite></li>
</ul>
<p>For each set of parameters to be tested a neuron model is instantiated by the
<cite>evaluator</cite>. A series of current injections is sent to the neuron while
recording the somatic voltage. A number of features are extracted from this
voltage trace, and compared to the same features extracted from the
corresponding experimental data.</p>
<p><cite>protocols.json</cite> lists the protocols and the associated stimuli. Each protocol
also specifies a holding current. The delay, amplitude, duration and total
duration are specified for each current injection.</p>
<p><cite>features.json</cite> lists the features. Each protocol has its own set of features.
For each feature the mean value and standard deviation (SD) are specified.
The SD is used when weighting the feature scores together to get the final
score for the model. Each feature also has a set of modifying parameters.</p>
<p><cite>mechanisms.json</cite> lists the mechanisms. Each ion channel has a corresponding
mod file which is compiled by nrnivmodl.</p>
<p><cite>parameters.json</cite> lists all the model parameters. These can either be
specified as a value, or as a range, by giving its upper and lower bounds.</p>
<p>Morphology of the neuron is located in <cite>morphology/</cite> directory:</p>
<ul class="simple">
<li><cite>morphology/BE37A-rep-cor-reg15.swc</cite></li>
</ul>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/fs-morpho.png" src="../../../../_images/fs-morpho.png" />
</div>
<p>The optimization phase is followed by the post optimization analysis within
the same notebook.  The script plots the evolution of the error scores
with successive iterations of the genetic algorithm (generations).</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/log.png" src="../../../../_images/log.png" />
</div>
<p>It displays the top ten individuals with the best scores and lists
the feature names.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/feature_scores.png" src="../../../../_images/feature_scores.png" />
</div>
<p>It also displays the simulated protocols (blue) overlaid on the
experimental data (grey) for the best individual.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/responses.png" src="../../../../_images/responses.png" />
</div>
<p>Finally, errors for each feature of the best individual are shown and
also a mean error score is calculated. Typically, the mean score is about
3 standard deviations.</p>
<div class="bsp-container-center docutils container">
<img alt="../../../../_images/best_scores.png" src="../../../../_images/best_scores.png" />
</div>
<p>It is possible to inspect any of the 10 candidate individuals as shown above
for the best individual. Corresponding instructions are given in the
notebook.</p>
</div>

            </div>

            <aside class="hbpdoc-hnav hbpdoc-hnav-bottom">
                
                <span class="hbpdoc-hnav-previous">
                    previous: <a class="hbpdoc-hnav-link" href="../basal_ganglia.html">Basal Ganglia</a>
                </span>
                
                
                <span class="hbpdoc-hnav-next">
                    next: <a class="hbpdoc-hnav-link" href="../../../circuit_building/circuit_building.html">Circuit Building</a>
                </span>
                
            </aside>
        </article>
    </section>


    <div class="hbpdoc-footer">
        HBP Brain Simulation Platform Guidebook <small>0.1</small> 
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Brain Simulation Platform members.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
    </div>
</div>

  </body>
</html>