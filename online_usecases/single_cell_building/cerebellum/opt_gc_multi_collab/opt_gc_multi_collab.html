


<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multi compartmental Cerebellar Granule cell running on collab &#8212; HBP Brain Simulation Platform Guidebook 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/hbpdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bsp.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bsp.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/extra.js"></script>
    <script type="text/javascript" src="../../../../_static/hbpdoc.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Multi compartmental Cerebellar Granule cell running on NSG" href="../opt_gc_multi_nsg/opt_gc_multi_nsg.html" />
    <link rel="prev" title="Mono compartmental Cerebellar Granule cell running on the collab" href="../opt_gc_single_collab/opt_gc_single_collab.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body role="document">
<div class="hbpdoc-page">
    <section class="hbpdoc-title page-header">
        <a class="project-title" href="../../../../index.html">HBP Brain Simulation Platform Guidebook</a>

        <a class="hbpdoc-toc-toggle pull-right" href>
            <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
        </a>
    </section>
    <section class="hbpdoc-main">
        <nav class="hbpdoc-sidebar hbpdoc-container">
            <a class="hbpdoc-toc-toggle pull-right" href>
                <span class="zmdi zmdi-menu"></span> <span class="sr-only icon-text">Menu</span>
            </a>
            
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../opt_gc_single_collab/opt_gc_single_collab.html"
                        title="previous chapter">Mono compartmental Cerebellar Granule cell running on the collab</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../opt_gc_multi_nsg/opt_gc_multi_nsg.html"
                        title="next chapter">Multi compartmental Cerebellar Granule cell running on NSG</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/online_usecases/single_cell_building/cerebellum/opt_gc_multi_collab/opt_gc_multi_collab.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </nav>

        <article class="hbpdoc-content">

            <div class="content">
                
                <div class="breadcrumb breadcrumb-meta expand">
                    
                    <a href="../../../online_usecases.html">Online Use Cases</a>
                    
                    <a href="../../single_cell_building.html">Single Cell Building</a>
                    
                    <a href="../cerebellum.html">Cerebellum</a>
                    
                </div>
                

                <aside class="hbpdoc-hnav hbpdoc-hnav-top">
                    
                    <span class="hbpdoc-hnav-previous">
                        previous: <a class="hbpdoc-hnav-link" href="../opt_gc_single_collab/opt_gc_single_collab.html">Mono compartmental Cerebellar Granule cell running on the collab</a>
                    </span>
                    
                    
                    <span class="hbpdoc-hnav-next">
                        next: <a class="hbpdoc-hnav-link" href="../opt_gc_multi_nsg/opt_gc_multi_nsg.html">Multi compartmental Cerebellar Granule cell running on NSG</a>
                    </span>
                    
                </aside>

                <div class="section" id="multi-compartmental-cerebellar-granule-cell-running-on-collab">
<h1>Multi compartmental Cerebellar Granule cell running on collab<a class="headerlink" href="#multi-compartmental-cerebellar-granule-cell-running-on-collab" title="Permalink to this headline">¶</a></h1>
<p>Multi compartmental Cerebellar Granule cell optimization, performed with BluePyOpt, direcly on the collab (Code and testing - Stefano Masoli PhD).</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The ionic channels mechanisms, the passive properties and the morphology were taken and adapted from a previous published granule cell model (Diwakar et al., 2006) (<a class="reference external" href="https://senselab.med.yale.edu/modeldb/showModel.cshtml?model=116835">https://senselab.med.yale.edu/modeldb/showModel.cshtml?model=116835</a>) and used in the automatic reconstruction and validation of the granule cells, using the BBP Optimizer Framework (Masoli et al., 2017). Information about the generation of the morphology can be found in the paper.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The code is commented, step by step, to define what is done in each ipython cell.</p>
<dl class="docutils">
<dt>Note - Each notebook cell has two square bracket on the left.</dt>
<dd><ol class="first last arabic simple">
<li>When they are empty, it means that the code was never started before.</li>
<li>When there is an asterisk [*], it means that the code is running.</li>
<li>When there is a number, it means that the code was run. A progressive numbering scheme defines the order in which the cells were selected.</li>
</ol>
</dd>
</dl>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/main.png"><img alt="../../../../_images/main.png" class="align-left" src="../../../../_images/main.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 1 – This optimization can be run on the collab but, since the intensive computational power required to run all the simulations, it is better not to use more than 4 individuals and 4 generations. Since this limitation, each run can generate a single model with a different degree of quality.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/custom.png"><img alt="../../../../_images/custom.png" class="align-right" src="../../../../_images/custom.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 2 - This custom class define the parameters and section to create to built an axon composed by specific sections. It is used to define the temperature, Vinit and the tables used in the MOD files too.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/run.png"><img alt="../../../../_images/run.png" class="align-right" src="../../../../_images/run.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 3 – To run the optimization, it is necessary to download some files from the collab storage to the place where the python notebook will run.
The file downloaded are the neuron morphology and the ionic channels.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/morph.png"><img alt="../../../../_images/morph.png" class="align-right" src="../../../../_images/morph.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 4 – This part of the code defines which morphology to load, if the axon has to be replaced by the previous Class and the locations, where we will insert the channels. The basic sectionlists are somatic, axonal, apical and basal.  It is possible to define custom sections and sectionslists.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/info_passive.png"><img alt="../../../../_images/info_passive.png" class="align-right" src="../../../../_images/info_passive.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 5 – This cell contains all the information to place the passive properties, with specific parameters, on the morphological locations defined before. For example: the membrane capacitance on all sections, will have a name cm_all, a param name taken from the mod file, the value, the location and the fact that is not a range (frozen = True)</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/ionic_mec.png"><img alt="../../../../_images/ionic_mec.png" class="align-right" src="../../../../_images/ionic_mec.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 6 - The ionic mechanism are loaded and inserted in the respective sections, defining which is each channel suffix, based on the information taken from the MOD files.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/channel_conduct.png"><img alt="../../../../_images/channel_conduct.png" class="align-right" src="../../../../_images/channel_conduct.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 7 – Each channel is provided with a conductance range, location and name.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/cell_all.png"><img alt="../../../../_images/cell_all.png" class="align-right" src="../../../../_images/cell_all.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 8 – This is the cell in which we put together the morphology, the passive and active properties to generate the cell template.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/el_location.png"><img alt="../../../../_images/el_location.png" class="align-right" src="../../../../_images/el_location.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 9 – Electrode location, used both to deliver the current and to record the voltage.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/stimuli.png"><img alt="../../../../_images/stimuli.png" class="align-right" src="../../../../_images/stimuli.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 10 - Stimuli, recordings location and protocols. For each protocol can be defined a recording location and a stimulus, in this case, both are in the soma</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The default parameters are the conductances which were known to produce a working model. Here are present to compare the results of the optimization with a reference.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/features.png"><img alt="../../../../_images/features.png" class="align-right" src="../../../../_images/features.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 11 – Features name and their parameter. They were obtained, with efel, from traces recorded, in vitro, from mice (Masoli et al., 2017).</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/cell_eval.png"><img alt="../../../../_images/cell_eval.png" class="align-right" src="../../../../_images/cell_eval.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 12 – The cell evaluator is in charge of putting together the model template and the parameter we want to search in the optimization.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/opt_gen.png"><img alt="../../../../_images/opt_gen.png" class="align-right" src="../../../../_images/opt_gen.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 13 – The optimization requires and certain number of individual and generation. More individual, more combination will be tested.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/eval_best.png"><img alt="../../../../_images/eval_best.png" class="align-right" src="../../../../_images/eval_best.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 14 – Evaluation of the best individual based on each simulations</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="bsp-container-center docutils container">
<a class="reference internal image-reference" href="../../../../_images/plot_best.png"><img alt="../../../../_images/plot_best.png" class="align-right" src="../../../../_images/plot_best.png" style="width: 1000px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Fig. 15 - Plot of the best individual and the min fitness obtained during the optimization</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>

            </div>

            <aside class="hbpdoc-hnav hbpdoc-hnav-bottom">
                
                <span class="hbpdoc-hnav-previous">
                    previous: <a class="hbpdoc-hnav-link" href="../opt_gc_single_collab/opt_gc_single_collab.html">Mono compartmental Cerebellar Granule cell running on the collab</a>
                </span>
                
                
                <span class="hbpdoc-hnav-next">
                    next: <a class="hbpdoc-hnav-link" href="../opt_gc_multi_nsg/opt_gc_multi_nsg.html">Multi compartmental Cerebellar Granule cell running on NSG</a>
                </span>
                
            </aside>
        </article>
    </section>


    <div class="hbpdoc-footer">
        HBP Brain Simulation Platform Guidebook <small>0.1</small> 
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Brain Simulation Platform members.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
    </div>
</div>

  </body>
</html>